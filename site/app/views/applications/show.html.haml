- content_for :full_layout, true
- content_for :dark_layout, true

- breadcrumb_for_application @application

- content_for :top do
  .grid-wrapper.section-header
    %nav.span12.span-flush-right.application-info
      .pull-right= link_to 'Delete', delete_application_path(@application), :class => 'btn btn-small'
      %h1.name= @application.name
      .url
        %strong @
        = link_to @application.web_url, @application.web_url

-#
  .emblem.span
    %img{:src => '/app/images/console/gear-bars.png'}
    .span
      -# placeholder for gear info
  .emblem.span
    %img{:src => '/app/images/console/bolt.png'}
    .span
      -# placeholder for bolt info
  .emblem.span
    %img{:src => '/app/images/console/mark.png'}
    .span
      -# placeholder for mark info
  .emblem.span
    %img{:src => '/app/images/console/warning.png'}
    .span
      -# placeholder for warning info
  .total-cost
    -# cost placeholder

%section#app-specifics
%section#app-cartridges.span9
  %header
    %h3.pull-left Cartridges
    .pull-right
      = link_to application_cartridge_types_path(@application), :class => 'add-cart-btn' do
        Add Cartridge
        %span.sprite

  -#.cartridge-block
    .row
      .span4
        %h2.indent-left= @application.framework_name
      .span5
        %ul.unstyled-flat.bits.indent-right
          %li
            %h6 Created
            %span.data
              #{time_ago_in_words(@application.creation_time)} ago
          -#
            %li
              %h6 Status
              %span.data
                normal
          -#%li
            %h6 Type
            %span.data= @application.framework_name
          -#
            %li
              %img{:src => "/app/images/console/gear-sm.png"}
    .row
      .span9
        .indent-left.indent-right
          %h6 Git Repository
          %pre.command-line.git_url
            = @application.git_url
  - @gear_groups.each_with_index do |group,g|
    .gear-group
      - group.cartridges.each_with_index do |cartridge,c|
        .cartridge-block
          .row
            .span4
              %h2.indent-left= cartridge.display_name
            .span5
              %ul.unstyled-flat.bits.indent-right
                - if c == 0
                  %li
                    %h6 Status
                    %span.data= gear_group_state(group.states)
                  %li
                    %h6 Gears
                    %span.data{:title => gear_group_count_title(cartridge, group.gears.length)}= gear_group_count(group.gears)
                - else
                  %li
                    %h6 Gears
                    %span.data{:title => 'This cartridge shares resources with the other cartridges it is grouped with.'} Shared

                -#%li
                  %h6 Type
                  %span.data= cartridge.type
                -#
                  %li
                    %img{:src => "/app/images/console/gear-sm.png"}
          .row
            .span9
              - if cartridge.git_url
                - if @has_keys
                  .indent-left.indent-right
                    %h6 Git Repository
                    %input#application_git_url.git-url{:readonly => 'readonly', :value => cartridge.git_url, :title => 'The code for your application will be available through this Git repository.'}
                    - content_for :javascripts do
                      :javascript
                        $('#application_git_url').focus(function() {this.select()}).click(function() {this.select()});
                    %h6 SSH Url
                    %input#application_ssh_url.git-url{:readonly => 'readonly', :value => cartridge.ssh_string, :title => 'Your app is accessable through this ssh url.'}
                    - content_for :javascripts do
                      :javascript
                        $('#application_ssh_url').focus(function() {this.select()}).click(function() {this.select()});
                - else
                  .indent-left
                    You must
                    =link_to "add a valid ssh public key to your account", account_path
                    before you can use git or ssh to develop your application.
          - if cartridge.scales? || cartridge.buildable?
            .embedded
              .indent-left
                - if cartridge.scales?
                  .embedded-cart
                    - if cartridge.scales.times == 1
                      = link_to "Scales with HAProxy", application_scaling_path(@application), :title => 'Your web cartridge will automatically scale up when we detect you are receiving more web traffic'
                    - else
                      = link_to "Scaled up with HAProxy x#{cartridge.scales.times}", application_scaling_path(@application), :title => 'Your web cartridge is running multiple copies to handle increased web traffic'

                - if cartridge.builds?
                  .embedded-cart #{link_to 'See Jenkins Build jobs', @application.build_job_url, :title=> 'Jenkins is currently running builds for your application'} #{link_to '(configure)', application_building_path(@application), :title => 'Remove or change your Jenkins configuration'}
                - elsif cartridge.buildable?
                  .embedded-cart
                    = link_to "Enable Jenkins builds", application_building_path(@application), :title => 'Jenkins helps you run builds, tests, and deployment steps when you push changes to your application.'


  .base.right.btn-toolbar
    = link_to application_cartridge_types_path(@application), :class => 'btn btn-primary btn-large' do
      Add
      %strong Cartridge
      %i.icon-add

%aside#secondary.span3
  %section#app-unique-info
    -#%h5 Visibility
    -#%ul.unstyled
      %li External
    %h5 Aliases
    %ul.unstyled
      - if @application.aliases.empty?
        %li No alias set
      - else
        - alias_scheme = @application.web_url.split(':').first
        - @application.aliases.each do |a|
          %li= link_to a, "#{alias_scheme}://#{a}"


  #assistance
    %h5 New to OpenShift?
    %ul.unstyled
      %li= link_to 'See the getting started tips for this app â†’', get_started_application_path(@application)

    %h5 Need Help?
    %ul.unstyled
      %li= link_to 'OpenShift User Guide', user_guide_url
      %li= link_to 'Sync your OpenShift repo with an existing Git repo', sync_git_with_remote_repo_knowledge_base_url 

  -# %h5 Need Help? #restore later
    %ul.unstyled
      %li
      - if @application_type.help_topics and not @application_type.help_topics.empty?
        %h5= @application.framework_name + ' Help'
        %ul.unstyled
        - @application_type.help_topics.each do |key, value|
          %li= link_to key, value

