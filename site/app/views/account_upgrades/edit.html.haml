- content_for :title, 'Set Account Information'
= plan_upgrade_steps 1

= semantic_form_for @full_user, :namespace => :upgrade_account, :url => edit_account_plan_upgrade_path, :html => {:method => :put} do |f|
  - if @full_user.persisted?
    %section
      %p
        Your Red Hat Network (RHN) account <strong>#{current_user_id}</strong> will be used when
        contacting technical support or making account changes. You can change the information
        stored there at any time by logging in at #{link_to "www.redhat.com", red_hat_account_url, :class => 'external'}.
  - else
    %section.row
      .span8
        = f.inputs 'Account', :class => 'inputs form-horizontal', :for => @full_user do |u|
          = u.semantic_errors
          = u.inputs :inline => true, :required => true, :name => 'Name' do
            = u.input :greeting, :required => true, :as => :select, :collection => greetings_for_select, :include_blank => false, :input_html => { :class => 'input-mini' }
            = u.input :first_name, :required => true, :input_html => { :placeholder => "First" }
            = u.input :last_name, :required => true, :input_html => { :placeholder => "Last" }
          = u.inputs :inline => true, :required => true, :name => 'Company Info' do
            = u.input :title, :required => false, :input_html => { :placeholder => "Job Title" }
            = u.input :company, :required => true, :input_html => { :placeholder => "Company Name" }
          = u.input :phone_number, :required => true, :label => 'Phone Number', :input_html => { :class => 'input-medium', :placeholder => "10 digit number", :maxlength => 10 }
          = u.input :email_subscribe, :as => :boolean, :checked_value => true, :unchecked_value => false, :required => false, :label => 'Receive mailings?', :input_html => { :title => 'Check here to receive periodic e-mails from Red Hat' }
          %p{ :style => 'font-size: 8pt; margin: 0px;' }
            &nbsp;
          = u.input :password, :required => true, :label => 'New Pasword', :input_html => { :class => 'input-medium' }
          = u.input :password_confirmation, :as => :password, :required => true, :label => 'Confirm Password', :input_html => { :class => 'input-medium' }

      %aside.span4
        %h5 Complete your Account
        %p
          To purchase a plan, we need to have a few pieces of information for tax and 
          legal purposes.  The info you provide will be stored as part of a Red Hat Network
          account (RHN) which gives you access to other Red Hat properties and services.

        %h5 How does a Red Hat account affect me?
        %p
          Upgrading your account will not change how you access and use OpenShift, nor will
          Red Hat or OpenShift contact you differently as part of this upgrade.  A Red Hat
          account is necessary for contacting Red Hat Support.

  %section.row
    .span8
      = render :partial => 'billing_info/form', :locals => {:billing_info => @billing_info, :form => f}
    %aside.span4
      %h5 Your contact information is safe
      %p
        Read our
        = link_to 'Privacy Policy', community_security_policy_url

      %h5 Don't see your country in the list?
      %p
        At this time paid OpenShift access is only available to customers in certain countries.
        We plan on expanding availability in the future.
        Please contact us at #{link_to_account_mailto} if you are interested in subscribing from another country.

      %h5 Choosing Your Currency
      %p
        You may choose to be billed in any of our available currencies.
        However, once you choose a currency, you cannot change it.

      %h5 Tax exempt?
      %p
        To qualify for tax exempt status you must submit a certificate to Red Hat.
        Upon reciept of your certificate we will refund all previously paid taxes to your credit card.
        #{link_to "Learn more about filing for tax exempt status", tax_exempt_help_status, :target => '_blank', :class => 'external'}.
  = f.buttons do
    = link_to "Back to plans", account_plans_path, :class => 'btn'
    = f.commit_button "Update my account"
    = f.loading
