%dt{:class => ssh_key.primary? ? 'primary_key' : 'additional_key'}
  = ssh_key.name
%dd.ssh_key_preview
  %code
    = ssh_key.key_string.slice(0, 25) + '...'
  %span.edit-widget
    %span.popup
      %span.popup-trigger
        = link_to 'Edit', '#'
      .popup-content
        = render :partial => 'express_ssh_keys/ssh_key_form', :locals => {:ssh_key => ssh_key}

  - unless ssh_key.primary?
    %span.edit-widget
      %span.popup
        %span.popup-trigger
          = link_to 'Delete', '#'

        .form.popup-content
          %header
            %h2
              = "Are you sure you want to delete this SSH key?"
          %p
            = "You will no longer be able to access the application and git repository with the \"#{ssh_key.name}\" keypair."

          %form{ :id => "#{ssh_key.name}_delete_form", :class => 'ssh_key_delete_form', 'data-remote' => 'true', :action => "#{express_ssh_keys_path}/#{ssh_key.name}", :method => 'delete' }
            %input{ :type => 'hidden', :name => 'express_ssh_key[name]', :value => "#{ssh_key.name}" }
            %input{ :type => 'submit', :class => 'delete_button', :value => 'Delete it!' }

