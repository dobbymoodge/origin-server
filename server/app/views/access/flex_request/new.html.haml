-# file: Flex request page

- content_for :page_title do
  Get Access to OpenShift Flex!

- content_for :scripts do
  = javascript_include_tag "/app/javascripts/jquery.validate.min.js"
  = javascript_include_tag "/app/javascripts/form"

= render 'shared/pageheader', :product => 'flex', :title => 'Try Flex', :subtitle => 'Request Access to OpenShift Flex'

.container_24#page

  #access.grid_13.push_5
    %h3 Request Access to OpenShift Flex
    
    - @access.errors.each do |key, value|
      - if key == :base
        %div
          %strong #{value}
        
    = semantic_form_for @access do |form|
      = form.inputs do
        = form.input :ec2_account_number
        - accepted_terms_list = Array.new(@user.terms.length)
        - if @user.terms.length > 0
          - @user.terms.each_with_index do |value, i|
            - accepted_terms_list[i] = value['termId']          
            .terms-link
              %a{:title => value['termTitle'], :href => value['termUrl'], :target => '_blank'} #{value['termTitle']}           
          = form.hidden_field :accepted_terms_list, :value => JSON.generate(accepted_terms_list)
          = form.input :terms_accepted, :input_html => { :type=>'checkbox' }
        - else
          .note Note:  You have previously accepted the applicable terms
          = form.hidden_field :terms_accepted, :value => "on"
      = form.buttons do
        = form.commit_button "Request Access", :input_html => { :class => 'button' }        
    .clear
  .clear
