API Documentation
=================

Create Domain
=============

Before performing any other express operations, users need to bind their login
with a domain.  To create a domain users need an ssh RSA key, available domain
name and their RHN login.

Submit via POST to: {openshift.express.server}/broker/domain
    Encode json string as http variable 'json_data',
    Include your password as http variable 'password'.

JSON String:
{
    'namespace': 'string',
    'rhlogin': 'login',
    'ssh': 'the key portion of an rsa key (excluding ssh-rsa and coment)',
    'alter': 'true - An optional flag to alter namespace and/or ssh key after creation',
    'debug': 'true - An optional flag to get debug information returned'
}

Return JSON String:
{
    'rhlogin': 'Red Hat Login',
    'uuid': "User UUID"
}


Application Control
===================

All application control is done via /broker/cartridge.  The below
documentation demonstrates how to create, destroy, start, restart, reload and
get basic status information about Express applications.

Action types include:

    configure: Create an application and start it
    deconfigure: Stop and delete an application
    start: Start a created but stopped application
    stop: Stop a running application
    restart: Restart a running application
    status: Get basic status information about an application

Submit via POST to: {openshift.express.server}/broker/cartridge
    Encode json string as http variable: 'json_data',
    Include your password as http variable 'password'

Submit JSON String:
{
    'cartridge': 'framework-type, ex: php-5.3',
    'action': 'configure, start, stop, restart, reload, status, deconfigure',
    'rhlogin': 'login'
}

Return JSON String (exit_code non-zero is failure):
{
    "debug":"Debug Output",
    "messages":"Other messages",
    "result":"Result messages"
    "exit_code": 0
}


User and Application Info
=========================

A list of running applications as well as basic user information is available
via /broker/userinfo.

Submit via POST to: {openshift.express.server}/broker/userinfo
    Encode json string as http variable 'json_data'
    Include your password as http variable 'password'

JSON String:
{
    'rhlogin': 'rhlogin'
}

Return JSON String:

{
    "app_info":{
        "newapp":{
            "framework":"<FRAMEWORK_TYPE>",
            "creation_time":"<CREATION_TIME>",
            "uuid":"<APPLICATION_UUID"
        }
    },
    "user_info":{
        "rhlogin":"<RHN_LOGIN>",
        "uuid":"<USER_UUID>",
        "ssh_key":"<PUB_SSH_KEY>",
        "rhc_domain":"<RHC_DOMAIN>",
        "namespace":"<DOMAIN_NAMESPACE>"
    }
}

