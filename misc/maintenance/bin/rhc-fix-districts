#!/usr/bin/env ruby

require 'rubygems'
require "/var/www/stickshift/broker/config/environment"

FIRST_UID=1000
MAX_CAPACITY=5500
MAX_UID=MAX_CAPACITY+FIRST_UID-1

# Get all districts
all_districts = District.find_all()

# Fix max_capacity and max_uid
all_districts.each do |dist|
  dist.max_capacity = MAX_CAPACITY
  dist.max_uid = MAX_UID
  dist.available_uids.delete_if {|x| x > MAX_UID }
  dist.save
end 

exit 0
