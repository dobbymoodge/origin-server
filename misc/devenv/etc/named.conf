// named.conf
//
// Provided by Red Hat bind package to configure the ISC BIND named(8) DNS
// server as a caching only nameserver (as a localhost DNS resolver only).
//
// See /usr/share/doc/bind*/sample/ for example named configuration files.
//

options {
	listen-on port 53 { 127.0.0.1; };
	listen-on port 953 { 127.0.0.1; };
	listen-on-v6 port 53 { ::1; };
	directory 	"/var/named";
	dump-file 	"/var/named/data/cache_dump.db";
        statistics-file "/var/named/data/named_stats.txt";
        memstatistics-file "/var/named/data/named_mem_stats.txt";
	allow-query     { localhost; };
	recursion yes;

        // dnssec interferes with EC2 internal queries when forwarding
	// dnssec-enable yes;
	// dnssec-validation yes;
	// dnssec-lookaside auto;

	/* Path to ISC DLV key */
	bindkeys-file "/etc/named.iscdlv.key";

	// set forwarding to the next nearest server (from DHCP response
        include "forwarders.conf";
};

logging {
        channel default_debug {
                file "data/named.run";
                severity dynamic;
        };
};

key "rndc-key" {
	algorithm hmac-md5;
	secret "jLudX+c5m+gm8yCDKq9mrg==";
};
 
controls {
	inet 127.0.0.1 port 953
		allow { 127.0.0.1; } keys { "rndc-key"; };
};

// zone "." IN {
//	ype hint;
//	file "named.ca";
//};
//include "upstream_hints.conf" ;

include "/etc/named.rfc1912.zones";

include "example.com.key";

zone "example.com" IN {
	type master;
	file "dynamic/example.com.db";
	allow-update { key example.com ; } ;
};

//include "dev.rhcloud.com.key";

//zone "dev.rhcloud.com" IN {
//	type master;
//	file "dynamic/dev.rhcloud.com.db";
//	allow-update { key dev.rhcloud.com ; } ;
//};
